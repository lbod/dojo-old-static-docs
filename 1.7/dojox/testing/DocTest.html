<div class="jsdoc-permalink" style="display:none;">/api/1.7/dojox/testing/DocTest</div><h1 class="jsdoc-title constructorIcon36">dojox.testing.DocTest <span style="font-size:11px;color:#999;">(version 1.7)</span></h1><div class="jsdoc-prototype">Object &raquo; dojox.testing.DocTest</div><div class="jsdoc-require">dojo.require("dojox.testing.DocTest");</div><div class="jsdoc-prototype">Defined in dojox/testing/DocTest.js</div><div class="jsdoc-function-information"><h3>Usage:</h3><div class="function-signature"><span class="keyword">var</span> foo = new dojox.testing.DocTest();</div></div><div class="jsdoc-full-summary"><p>DocTests are tests that are defined inside the comment.
A doctest looks as if it was copied from the shell (which it mostly is).
A doctest is executed when the following conditions match:
1) all lines are comments
2) the line always starts with spaces/tabs followed by "//"
and at least one space
3) the line(s) of the test to execute starts with ">>>"
preceeded by what is described in 2)
4) the first line after 3) starting without ">>>" is the exptected result.
preceeded by what is described in 2)
5) the test sequence is terminated by an empty line, or the next
test in the following line, or a new line that does not start as described in 2)
(simple said: is not a comment)
preceeded by what is described in 2)
I.e. the following is a simple doctest, that will actually also be run
if you run this class against this file here:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>1+1 // A simple test case. Terminated by an empty line
      2
      1==2
      false
      "a"+"b" // Also without the empty line before, this is a new test.
      "ab"
      var anything = "anything" // Multiple commands for one test.
      "something"==anything
      false
      DocTests are great for inline documenting a class or method, they also
      are very helpful in understanding what the class/method actually does.
      They don't make sense everywhere, but sometimes they are really handy.</p>
    </blockquote>
  </blockquote>
</blockquote>
</div><div class="jsdoc-children"><div class="jsdoc-field-list"><h2 class="jsdoc-summary-heading">Property Summary <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><ul><li class="arrayIcon public inherited even"><a class="inline-link" href="#errors">errors</a></li><li class="objectIcon public inherited odd"><a class="inline-link" href="#tests">tests</a></li></ul></div><h2 class="jsdoc-summary-heading">Method Summary <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><ul><li class="functionIcon private inherited even"><a class="inline-link" href="#_getTestsFromString">_getTestsFromString</a><span class="parameters">(data, insideComments)</span> <span>Parse the given string for tests.</span></li><li class="functionIcon private inherited odd"><a class="inline-link" href="#_run">_run</a><span class="parameters">(tests)</span> <span>Each element in the array contains the test in the first element,
	and the expected result in the second element.</span></li><li class="functionIcon public  even"><a class="inline-link" href="#constructor">constructor</a><span class="parameters">()</span><span class="jsdoc-returns"> returns dojox.testing.DocTest</span> <span>A reference to the constructor function for this object.</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#getTests">getTests</a><span class="parameters">(moduleName)</span> <span>Extract the tests from the given module or string.
	examples:
	&gt;&gt;&gt; dojo.isArray(new dojox.testing.DocTest().getTests(&quot;dojox.testing.DocTest&quot;)) // Use the module name to extract the tests from.
	true</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#getTestsFromString">getTestsFromString</a><span class="parameters">(data)</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#run">run</a><span class="parameters">(moduleName)</span> <span>Run the doctests in the module given.</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#runTest">runTest</a><span class="parameters">(commands, expected)</span></li></ul></div></div></div><div class="jsdoc-children"><div class="jsdoc-fields"><h2>Properties</h2><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="errors"></a><span class="arrayIcon">errors</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/testing/DocTest">dojox.testing.DocTest</a></div></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="tests"></a><span class="objectIcon">tests</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/testing/DocTest">dojox.testing.DocTest</a></div></div><h2>Methods</h2><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_getTestsFromString"></a><span class="functionIcon">_getTestsFromString</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/testing/DocTest">dojox.testing.DocTest</a></div><div class="jsdoc-summary">Parse the given string for tests.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">data</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">insideComments</td><td class="jsdoc-param-type">Boolean</td><td class="jsdoc-param-description">Boolean, if false &quot;data&quot; contains only the pure tests, comments already stripped.</td></tr></table></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_run"></a><span class="functionIcon">_run</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/testing/DocTest">dojox.testing.DocTest</a></div><div class="jsdoc-summary">Each element in the array contains the test in the first element,
	and the expected result in the second element.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">tests</td><td class="jsdoc-param-type">Array</td><td class="jsdoc-param-description">Make sure that the types are compared properly. There used to be
	the bug that a return value false was compared to &quot;false&quot; which
	made the test fail. This is fixed and should be verified by the
	following tests.
	&gt;&gt;&gt; false
	false
	&gt;&gt;&gt; &quot;false&quot;
	&quot;false&quot;
	&gt;&gt;&gt; true
	true
	&gt;&gt;&gt; 1
	1
	&gt;&gt;&gt; &quot;s&quot;
	&quot;s&quot;
	&gt;&gt;&gt; dojo.toJson({one:1})
	&quot;{&quot;one&quot;:1}&quot;</td></tr></table></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="constructor"></a><span class="functionIcon">constructor</span></div><div class="jsdoc-inheritance">Overrides <a class="jsdoc-link" href="/api/1.7/Object">Object</a></div><div class="jsdoc-return-type">Returns <strong>dojox.testing.DocTest</strong></div><div class="jsdoc-summary">A reference to the constructor function for this object.</div></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="getTests"></a><span class="functionIcon">getTests</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/testing/DocTest">dojox.testing.DocTest</a></div><div class="jsdoc-summary">Extract the tests from the given module or string.
	examples:
	&gt;&gt;&gt; dojo.isArray(new dojox.testing.DocTest().getTests(&quot;dojox.testing.DocTest&quot;)) // Use the module name to extract the tests from.
	true</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">moduleName</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="getTestsFromString"></a><span class="functionIcon">getTestsFromString</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/testing/DocTest">dojox.testing.DocTest</a></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">data</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="run"></a><span class="functionIcon">run</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/testing/DocTest">dojox.testing.DocTest</a></div><div class="jsdoc-summary">Run the doctests in the module given.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">moduleName</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table><div class="jsdoc-examples"><div class="jsdoc-example"><div><strong>Example 1</strong></div>
doctest = new dojox.testing.DocTest();
doctest.run(&quot;dojox.testing.DocTest&quot;);
doctest.errors should finally be an empty array.
// The above is not a doctest, because it just would
//	execute itself in a never ending loop.
&gt;&gt;&gt; true==true // Test a new line terminating the test.
true
&gt;&gt;&gt; true==true // Test a new test terminating the test.
true
&gt;&gt;&gt; true==true // Test a &quot;not a comment&quot;-line, especially an empty line terminating the test.
true</div></div></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="runTest"></a><span class="functionIcon">runTest</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/testing/DocTest">dojox.testing.DocTest</a></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">commands</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">expected</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div></div></div>