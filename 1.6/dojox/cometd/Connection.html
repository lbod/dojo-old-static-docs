<div class="jsdoc-permalink" style="display:none;">/api/1.6/dojox/cometd/Connection</div><h1 class="jsdoc-title constructorIcon36">dojox.cometd.Connection <span style="font-size:11px;color:#999;">(version 1.6)</span></h1><div class="jsdoc-prototype">Object &raquo; dojox.cometd.Connection</div><div class="jsdoc-require">dojo.require("dojox.cometd._base");</div><div class="jsdoc-prototype">Defined in dojox/cometd/_base.js</div><div class="jsdoc-function-information"><h3>Usage:</h3><div class="function-signature"><span class="keyword">var</span> foo = new dojox.cometd.Connection(<span class="jsdoc-comment-type">/*  */</span> prefix);</div></div><div class="jsdoc-children"><div class="jsdoc-field-list"><h2 class="jsdoc-summary-heading">Property Summary <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><ul><li class="numberIcon private inherited even"><a class="inline-link" href="#_backoffInterval">_backoffInterval</a></li><li class="objectIcon private inherited odd"><a class="inline-link" href="#_deferredSubscribes">_deferredSubscribes</a></li><li class="objectIcon private inherited even"><a class="inline-link" href="#_handshook">_handshook</a></li><li class="objectIcon private inherited odd"><a class="inline-link" href="#_initialized">_initialized</a></li><li class="objectIcon private inherited even"><a class="inline-link" href="#_isXD">_isXD</a></li><li class="arrayIcon private inherited odd"><a class="inline-link" href="#_messageQ">_messageQ</a></li><li class="objectIcon private inherited even"><a class="inline-link" href="#_props">_props</a></li><li class="stringIcon private inherited odd"><a class="inline-link" href="#_status">_status</a></li><li class="arrayIcon private inherited even"><a class="inline-link" href="#_subscriptions">_subscriptions</a></li><li class="numberIcon public inherited odd"><a class="inline-link" href="#batch">batch</a></li><li class="objectIcon public inherited even"><a class="inline-link" href="#clientId">clientId</a></li><li class="objectIcon public inherited odd"><a class="inline-link" href="#handshakeReturn">handshakeReturn</a></li><li class="objectIcon public inherited even"><a class="inline-link" href="#lastMessage">lastMessage</a></li><li class="objectIcon public inherited odd"><a class="inline-link" href="#url">url</a></li></ul></div><h2 class="jsdoc-summary-heading">Method Summary <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><ul><li class="functionIcon private inherited even"><a class="inline-link" href="#_backoff">_backoff</a><span class="parameters">()</span></li><li class="functionIcon private inherited odd"><a class="inline-link" href="#_backon">_backon</a><span class="parameters">()</span></li><li class="functionIcon private inherited even"><a class="inline-link" href="#_connectTimeout">_connectTimeout</a><span class="parameters">()</span> <span>Return the connect timeout in ms, calculated as the minimum of the advised timeout
	and the configured timeout. Else 0 to indicate no client side timeout</span></li><li class="functionIcon private inherited odd"><a class="inline-link" href="#_deliver">_deliver</a><span class="parameters">(message)</span></li><li class="functionIcon private inherited even"><a class="inline-link" href="#_extendIn">_extendIn</a><span class="parameters">(message)</span> <span>Handle extensions for inbound messages</span></li><li class="functionIcon private inherited odd"><a class="inline-link" href="#_extendOut">_extendOut</a><span class="parameters">(message)</span> <span>Handle extensions for inbound messages</span></li><li class="functionIcon private inherited even"><a class="inline-link" href="#_finishInit">_finishInit</a><span class="parameters">(data)</span> <span>Handle the handshake return from the server and initialize
	connection if all is OK</span></li><li class="functionIcon private inherited odd"><a class="inline-link" href="#_interval">_interval</a><span class="parameters">()</span></li><li class="functionIcon private inherited even"><a class="inline-link" href="#_publishMeta">_publishMeta</a><span class="parameters">(action, successful, props)</span></li><li class="functionIcon private inherited odd"><a class="inline-link" href="#_sendMessage">_sendMessage</a><span class="parameters">(message)</span></li><li class="functionIcon public  even"><a class="inline-link" href="#constructor">constructor</a><span class="parameters">(prefix)</span><span class="jsdoc-returns"> returns dojox.cometd.Connection</span> <span>A reference to the constructor function for this object.</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#deliver">deliver</a><span class="parameters">(messages)</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#disconnect">disconnect</a><span class="parameters">()</span> <span>Disconnect from the server.</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#endBatch">endBatch</a><span class="parameters">()</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#init">init</a><span class="parameters">(root, props, bargs)</span> <span>Initialize the cometd implementation of the Bayeux protocol</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#publish">publish</a><span class="parameters">(channel, data, props)</span> <span>publishes the passed message to the cometd server for delivery
	on the specified topic</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#startBatch">startBatch</a><span class="parameters">()</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#state">state</a><span class="parameters">()</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#subscribe">subscribe</a><span class="parameters">(channel, objOrFunc, funcName, props)</span><span class="jsdoc-returns"> returns dojo.Deferred</span> <span>inform the server of this client's interest in channel</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#subscribed">subscribed</a><span class="parameters">(channel, message)</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#tunnelCollapse">tunnelCollapse</a><span class="parameters">()</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#tunnelInit">tunnelInit</a><span class="parameters">(childLocation, childDomain)</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#unsubscribe">unsubscribe</a><span class="parameters">(channel, objOrFunc, funcName, props)</span><span class="jsdoc-returns"> returns dojo.Deferred</span> <span>inform the server of this client's disinterest in channel</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#unsubscribed">unsubscribed</a><span class="parameters">(channel, message)</span></li></ul></div><h2 class="jsdoc-summary-heading">Event Summary <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><ul><li class="functionIcon private inherited even"><a class="inline-link" href="#_onUnload">_onUnload</a><span class="parameters">()</span></li></ul></div><h2 class="jsdoc-summary-heading">Attached Objects <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><div class="jsdoc-field"><div class="jsdoc-title"><span class="object"><a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection/_advice">dojox.cometd.Connection._advice</a></span></div></div><div class="jsdoc-field"><div class="jsdoc-title"><span class="object"><a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection/currentTransport">dojox.cometd.Connection.currentTransport</a></span></div></div></div></div></div><div class="jsdoc-children"><div class="jsdoc-fields"><h2>Properties</h2><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_backoffInterval"></a><span class="numberIcon">_backoffInterval</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_deferredSubscribes"></a><span class="objectIcon">_deferredSubscribes</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_handshook"></a><span class="objectIcon">_handshook</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_initialized"></a><span class="objectIcon">_initialized</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_isXD"></a><span class="objectIcon">_isXD</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_messageQ"></a><span class="arrayIcon">_messageQ</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_props"></a><span class="objectIcon">_props</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_status"></a><span class="stringIcon">_status</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_subscriptions"></a><span class="arrayIcon">_subscriptions</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="batch"></a><span class="numberIcon">batch</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="clientId"></a><span class="objectIcon">clientId</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="handshakeReturn"></a><span class="objectIcon">handshakeReturn</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="lastMessage"></a><span class="objectIcon">lastMessage</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="url"></a><span class="objectIcon">url</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><h2>Methods</h2><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_backoff"></a><span class="functionIcon">_backoff</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_backon"></a><span class="functionIcon">_backon</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_connectTimeout"></a><span class="functionIcon">_connectTimeout</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><div class="jsdoc-summary">Return the connect timeout in ms, calculated as the minimum of the advised timeout
	and the configured timeout. Else 0 to indicate no client side timeout</div></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_deliver"></a><span class="functionIcon">_deliver</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">message</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_extendIn"></a><span class="functionIcon">_extendIn</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><div class="jsdoc-summary">Handle extensions for inbound messages</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">message</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_extendOut"></a><span class="functionIcon">_extendOut</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><div class="jsdoc-summary">Handle extensions for inbound messages</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">message</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_finishInit"></a><span class="functionIcon">_finishInit</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><div class="jsdoc-summary">Handle the handshake return from the server and initialize
	connection if all is OK</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">data</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_interval"></a><span class="functionIcon">_interval</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_publishMeta"></a><span class="functionIcon">_publishMeta</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">action</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">successful</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">props</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_sendMessage"></a><span class="functionIcon">_sendMessage</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">message</td><td class="jsdoc-param-type">object</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="constructor"></a><span class="functionIcon">constructor</span></div><div class="jsdoc-inheritance">Overrides <a class="jsdoc-link" href="/api/1.6/Object">Object</a></div><div class="jsdoc-return-type">Returns <strong>dojox.cometd.Connection</strong></div><div class="jsdoc-summary">A reference to the constructor function for this object.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">prefix</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="deliver"></a><span class="functionIcon">deliver</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">messages</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="disconnect"></a><span class="functionIcon">disconnect</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><div class="jsdoc-summary"><p>Disconnect from the server by sending a disconnect message</p>
</div><div class="jsdoc-examples"><div class="jsdoc-example"><div><strong>Example 1</strong></div>
<pre class="brush: js;" lang="javascript">
	dojox.cometd.disconnect();
</pre></div></div></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="endBatch"></a><span class="functionIcon">endBatch</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="init"></a><span class="functionIcon">init</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><div class="jsdoc-summary"><p>Initialize the cometd implementation of the Bayeux protocol by
sending a handshake message. The cometd state will be changed to CONNECTING
until a handshake response is received and the first successful connect message
has returned.
The protocol state changes may be monitored
by subscribing to the dojo topic "/prefix/meta" (typically "/cometd/meta") where
events are published in the form
{cometd:this,action:"handshake",successful:true,state:this.state()}</p>
</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">root</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description">The URL of the cometd server. If the root is absolute, the host
	is examined to determine if xd transport is needed. Otherwise the
	same domain is assumed.</td></tr><tr><td class="jsdoc-param-name">props</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"><div><em>Optional.</em></div>An optional object that is used as the basis of the handshake message</td></tr><tr><td class="jsdoc-param-name">bargs</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"><div><em>Optional.</em></div>An optional object of bind args mixed in with the send of the handshake</td></tr></table><div class="jsdoc-examples"><div class="jsdoc-example"><div><strong>Example 1</strong></div>
<pre class="brush: js;" lang="javascript">
	dojox.cometd.init(&quot;/cometd&quot;);
	dojox.cometd.init(&quot;http://xdHost/cometd&quot;,{ext:{user:&quot;fred&quot;,pwd:&quot;secret&quot;}});
</pre></div></div></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="publish"></a><span class="functionIcon">publish</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><div class="jsdoc-summary">publishes the passed message to the cometd server for delivery
	on the specified topic</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">channel</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description">the destination channel for the message</td></tr><tr><td class="jsdoc-param-name">data</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description">a JSON object containing the message &quot;payload&quot;
	properties:
	Optional. Other meta-data to be mixed into the top-level of the
	message</td></tr><tr><td class="jsdoc-param-name">props</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"><div><em>Optional.</em></div></td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="startBatch"></a><span class="functionIcon">startBatch</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="state"></a><span class="functionIcon">state</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="subscribe"></a><span class="functionIcon">subscribe</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><div class="jsdoc-return-type">Returns <strong>dojo.Deferred</strong></div><div class="jsdoc-summary"><p><code>dojox.cometd.subscribe()</code> handles all the hard work of telling
the server that we want to be notified when events are
published on a particular topic. <code>subscribe</code> accepts a function
to handle messages and returns a <code>dojo.Deferred</code> object which
has an extra property added to it which makes it suitable for
passing to <code>dojox.cometd.unsubscribe()</code> as a "subscription
handle" (much like the handle object that <code>dojo.connect()</code>
produces and which <code>dojo.disconnect()</code> expects).
Note that of a subscription is registered before a connection
with the server is established, events sent before the
connection is established will not be delivered to this client.
The deferred object which <code>subscribe</code> returns will callback
when the server successfuly acknolwedges receipt of our
"subscribe" request.</p>
</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">channel</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description">name of the cometd channel to subscribe to</td></tr><tr><td class="jsdoc-param-name">objOrFunc</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description">an object scope for funcName or the name or reference to a
	function to be called when messages are delivered to the
	channel</td></tr><tr><td class="jsdoc-param-name">funcName</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description">the second half of the objOrFunc/funcName pair for identifying
	a callback function to notifiy upon channel message delivery</td></tr><tr><td class="jsdoc-param-name">props</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"><div><em>Optional.</em></div></td></tr></table><div class="jsdoc-examples"><div class="jsdoc-example"><div><strong>Example 1</strong></div>
Simple subscribe use-case
<pre class="brush: js;" lang="javascript">
	dojox.cometd.init(&quot;http://myserver.com:8080/cometd&quot;);
	// log out all incoming messages on /foo/bar
	dojox.cometd.subscribe(&quot;/foo/bar&quot;, console, &quot;debug&quot;);
</pre></div><div class="jsdoc-example"><div><strong>Example 2</strong></div>
Subscribe before connection is initialized
<pre class="brush: js;" lang="javascript">
	dojox.cometd.subscribe(&quot;/foo/bar&quot;, console, &quot;debug&quot;);
	dojox.cometd.init(&quot;http://myserver.com:8080/cometd&quot;);
</pre></div><div class="jsdoc-example"><div><strong>Example 3</strong></div>
Subscribe an unsubscribe
<pre class="brush: js;" lang="javascript">
	dojox.cometd.init(&quot;http://myserver.com:8080/cometd&quot;);
	var h = dojox.cometd.subscribe(&quot;/foo/bar&quot;, console, &quot;debug&quot;);
	dojox.cometd.unsubscribe(h);
</pre></div><div class="jsdoc-example"><div><strong>Example 4</strong></div>
Listen for successful subscription:
<pre class="brush: js;" lang="javascript">
	dojox.cometd.init(&quot;http://myserver.com:8080/cometd&quot;);
	var h = dojox.cometd.subscribe(&quot;/foo/bar&quot;, console, &quot;debug&quot;);
	h.addCallback(function(){
		console.debug(&quot;subscription to /foo/bar established&quot;);
	});
</pre></div></div></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="subscribed"></a><span class="functionIcon">subscribed</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">channel</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">message</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="tunnelCollapse"></a><span class="functionIcon">tunnelCollapse</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="tunnelInit"></a><span class="functionIcon">tunnelInit</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">childLocation</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">childDomain</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="unsubscribe"></a><span class="functionIcon">unsubscribe</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><div class="jsdoc-return-type">Returns <strong>dojo.Deferred</strong></div><div class="jsdoc-summary">inform the server of this client's disinterest in channel</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">channel</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description">name of the cometd channel to unsubscribe from</td></tr><tr><td class="jsdoc-param-name">objOrFunc</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"><div><em>Optional.</em></div>an object scope for funcName or the name or reference to a
	function to be called when messages are delivered to the
	channel. If null then all subscribers to the channel are unsubscribed.</td></tr><tr><td class="jsdoc-param-name">funcName</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description"><div><em>Optional.</em></div>the second half of the objOrFunc/funcName pair for identifying
	a callback function to notifiy upon channel message delivery</td></tr><tr><td class="jsdoc-param-name">props</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"><div><em>Optional.</em></div></td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="unsubscribed"></a><span class="functionIcon">unsubscribed</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">channel</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">message</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"></td></tr></table></div><h2>Events</h2><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_onUnload"></a><span class="functionIcon">_onUnload</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.6/dojox/cometd/Connection">dojox.cometd.Connection</a></div></div></div></div>